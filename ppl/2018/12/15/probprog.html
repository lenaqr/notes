<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Rambly thoughts on probabilistic programming | Lu’s Notes</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Rambly thoughts on probabilistic programming" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Between having just come back from NeurIPS and met up with some of my old labmates, and watching the talks from PROBPROG 2018, I’ve gotten into thinking about probabilistic programming again." />
<meta property="og:description" content="Between having just come back from NeurIPS and met up with some of my old labmates, and watching the talks from PROBPROG 2018, I’ve gotten into thinking about probabilistic programming again." />
<link rel="canonical" href="https://luanths.github.io/notes/ppl/2018/12/15/probprog.html" />
<meta property="og:url" content="https://luanths.github.io/notes/ppl/2018/12/15/probprog.html" />
<meta property="og:site_name" content="Lu’s Notes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-12-15T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"Between having just come back from NeurIPS and met up with some of my old labmates, and watching the talks from PROBPROG 2018, I’ve gotten into thinking about probabilistic programming again.","@type":"BlogPosting","url":"https://luanths.github.io/notes/ppl/2018/12/15/probprog.html","headline":"Rambly thoughts on probabilistic programming","dateModified":"2018-12-15T00:00:00-06:00","datePublished":"2018-12-15T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://luanths.github.io/notes/ppl/2018/12/15/probprog.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/notes/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://luanths.github.io/notes/feed.xml" title="Lu's Notes" /><link rel="shortcut icon" type="image/x-icon" href="/notes/images/favicon.ico"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Rambly thoughts on probabilistic programming | Lu’s Notes</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Rambly thoughts on probabilistic programming" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Between having just come back from NeurIPS and met up with some of my old labmates, and watching the talks from PROBPROG 2018, I’ve gotten into thinking about probabilistic programming again." />
<meta property="og:description" content="Between having just come back from NeurIPS and met up with some of my old labmates, and watching the talks from PROBPROG 2018, I’ve gotten into thinking about probabilistic programming again." />
<link rel="canonical" href="https://luanths.github.io/notes/ppl/2018/12/15/probprog.html" />
<meta property="og:url" content="https://luanths.github.io/notes/ppl/2018/12/15/probprog.html" />
<meta property="og:site_name" content="Lu’s Notes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-12-15T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"Between having just come back from NeurIPS and met up with some of my old labmates, and watching the talks from PROBPROG 2018, I’ve gotten into thinking about probabilistic programming again.","@type":"BlogPosting","url":"https://luanths.github.io/notes/ppl/2018/12/15/probprog.html","headline":"Rambly thoughts on probabilistic programming","dateModified":"2018-12-15T00:00:00-06:00","datePublished":"2018-12-15T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://luanths.github.io/notes/ppl/2018/12/15/probprog.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Merriweather"><link type="application/atom+xml" rel="alternate" href="https://luanths.github.io/notes/feed.xml" title="Lu's Notes" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head><body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/notes/">Lu&#39;s Notes</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/notes/about/">About Me</a><a class="page-link" href="/notes/search/">Search</a><a class="page-link" href="/notes/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Rambly thoughts on probabilistic programming</h1><p class="post-meta post-meta-title"><time class="dt-published" datetime="2018-12-15T00:00:00-06:00" itemprop="datePublished">
        Dec 15, 2018
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      2 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/notes/categories/#ppl">ppl</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Between having just come back from NeurIPS and met up with some of my old
labmates, and watching the <a href="https://www.youtube.com/playlist?list=PL_PW0E_Tf2qvXBEpl10Y39RULTN-ExzZQ">talks from PROBPROG 2018</a>, I’ve gotten
into thinking about probabilistic programming again.</p>

<p>In particular I’ve been thinking about the design of probabilistic programming
frameworks, from the now popular deep-learning-focused ones such as <a href="http://pyro.ai/">Pyro</a>
and <a href="https://github.com/tensorflow/probability">Tensorflow Probability</a>, to a new project from my former lab,
<a href="https://github.com/probcomp/Gen">Gen</a>.</p>

<p>Of course, my <a href="https://dspace.mit.edu/handle/1721.1/113160">M.Eng thesis</a> was on this topic. But looking back on it
now, the proposal in my thesis seems <em>way too complicated</em>. (I think part of it
is that I was anchored to the existing implementations of Venture in the lab,
which had a lot of complicated cruft in them.)</p>

<p>I want to revisit this and maybe eventually produce something that I can explain
to other people, but for now here are some scattered thoughts:</p>

<ul>
  <li>
    <p>In my thesis there was this whole section on traces with a monolithic
interface that they should satisfy. I like Gen’s approach better, where a
trace is basically a plain data structure whose interpretation depends on the
model program.</p>
  </li>
  <li>
    <p>In fact, I would go further. Probabilistically, there’s nothing special about
tracing; it’s just a program transformation that turns a probabilistic program
into a program that returns a trace data structure. This should simplify
concepts a lot.</p>
  </li>
  <li>
    <p>I had this idea that stochastic procedures could have their own internal
mutable state, to keep track of something like sufficient statistics. In
hindsight it seems better for procedures to be stateless but allowed to mutate
their inputs. You can still have a stateful procedure by making a closure.
Note: mutation only plays well with inference algorithms if a mutating
procedure knows how to run itself backward to undo what it did.</p>
  </li>
  <li>
    <p>Another source of complexity was for handling probabilistic programs that
don’t have a joint density, such as programs that call out to an external
simulator. My current opinion is that this doesn’t seem worth cluttering up
the core interface for. You could work around this by, for example, tracing
the external program’s use of the random number generator and making a joint
density out of that. (This is basically the approach in <a href="https://arxiv.org/pdf/1807.07706.pdf">Frank Wood’s work
with the physics simulator SHERPA</a>.)</p>
  </li>
  <li>
    <p>If the trace is just a data structure like in Gen, all the incremental graph
stuff in Venture just becomes a data diffing problem. That’s neat.</p>
  </li>
</ul>


  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="luanths/notes"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/notes/ppl/2018/12/15/probprog.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/notes/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/notes/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/notes/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p></p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/luanths" title="luanths"><svg class="svg-icon grey"><use xlink:href="/notes/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/luanths" title="luanths"><svg class="svg-icon grey"><use xlink:href="/notes/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
